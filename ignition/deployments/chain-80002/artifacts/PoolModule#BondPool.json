{
  "_format": "hh3-artifact-1",
  "contractName": "BondPool",
  "sourceName": "contracts/protocol/BondPool.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_protocol",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_factory",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "ReentrancyGuardReentrantCall",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint64",
          "name": "_poolId",
          "type": "uint64"
        },
        {
          "internalType": "address",
          "name": "_underlyingToken",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_supplyTokenName",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_supplyTokenSymbol",
          "type": "string"
        }
      ],
      "name": "createPool",
      "outputs": [
        {
          "components": [
            {
              "internalType": "uint64",
              "name": "poolId",
              "type": "uint64"
            },
            {
              "internalType": "address",
              "name": "underlyingToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "supplyToken",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "unclaimedProfit",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "currentIndex",
              "type": "uint256"
            }
          ],
          "internalType": "struct DataTypes.PoolData",
          "name": "_pool",
          "type": "tuple"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint64",
          "name": "_poolId",
          "type": "uint64"
        }
      ],
      "name": "getPool",
      "outputs": [
        {
          "components": [
            {
              "internalType": "uint64",
              "name": "poolId",
              "type": "uint64"
            },
            {
              "internalType": "address",
              "name": "underlyingToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "supplyToken",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "unclaimedProfit",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "currentIndex",
              "type": "uint256"
            }
          ],
          "internalType": "struct DataTypes.PoolData",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getProtocol",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_account",
          "type": "address"
        }
      ],
      "name": "getUserData",
      "outputs": [
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "currentPoolIndex",
              "type": "uint256"
            }
          ],
          "internalType": "struct DataTypes.UserData",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint64",
          "name": "_poolId",
          "type": "uint64"
        },
        {
          "internalType": "uint256",
          "name": "_fee",
          "type": "uint256"
        }
      ],
      "name": "handlePoolIncentive",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "protocol",
      "outputs": [
        {
          "internalType": "contract IBondProtocol",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint64",
          "name": "_poolId",
          "type": "uint64"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_onBehalfOf",
          "type": "address"
        }
      ],
      "name": "supply",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "tokenFactory",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        },
        {
          "internalType": "uint64",
          "name": "_poolId",
          "type": "uint64"
        }
      ],
      "name": "updateUserIncentives",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint64",
          "name": "_poolId",
          "type": "uint64"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_onBehalfOf",
          "type": "address"
        }
      ],
      "name": "withdraw",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x60c0346100ab57601f6110aa38819003918201601f19168301916001600160401b038311848410176100af5780849260409485528339810103126100ab57610052602061004b836100c3565b92016100c3565b60015f556001600160a01b0390911660805260a052604051610fd290816100d8823960805181818161025201528181610467015281816104e7015281816105d601526107c9015260a05181818161019e01526102ea0152f35b5f80fd5b634e487b7160e01b5f52604160045260245ffd5b51906001600160a01b03821682036100ab5756fe60806040526004361015610011575f80fd5b5f5f3560e01c8062505499146107aa578063142d3fbd146105a85780637717fbc6146104c75780638ce7442614610451578063919adab814610496578063d16352af14610451578063d6db5b64146101cd578063e77772fe14610188578063ee6a0bef146100de5763ffc9896b14610087575f80fd5b346100db5760203660031901126100db5760406020916100a5610a45565b8183516100b181610ae2565b526001600160a01b031681526002835220604051906100cf82610ae2565b54809152604051908152f35b80fd5b50346100db5760403660031901126100db576100f8610a45565b6024356001600160401b038116810361018457610113610d72565b6001600160a01b03604061012683610c8d565b015116330361013f5761013891610d9d565b6001815580f35b60405162461bcd60e51b815260206004820152601960248201527f43616c6c6572206d75737420626520706f6f6c20746f6b656e000000000000006044820152606490fd5b8280fd5b50346100db57806003193601126100db576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346100db5760803660031901126100db576101e7610a2f565b6024356001600160a01b03811690819003610184576044356001600160401b03811161044d5761021b903690600401610b4d565b6064356001600160401b0381116103fa5761023a903690600401610b4d565b906001600160401b0361024b610c63565b94610280337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b168086526001602052604080872054919291901c6001600160a01b0316610411576102d36020916102e56040519586938493631ee6928560e21b8552876004860152606060248601526064850190610d4e565b83810360031901604485015290610d4e565b0381887f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165af19182156104065785926103bc575b506103b894816040928652602086019485528286019360018060a01b031684528152600160205220916001600160401b03845116835491600160401b600160e01b03905160401b169163ffffffff60e01b1617178255600182019060018060a01b039051166001600160601b0360a01b825416179055606082015160028201556003608083015191015560405191829182610a95565b0390f35b9091506020813d6020116103fe575b816103d860209383610b2c565b810103126103fa57516001600160a01b03811681036103fa57906103b8610322565b8480fd5b3d91506103cb565b6040513d87823e3d90fd5b60405162461bcd60e51b8152602060048201526014602482015273141bdbdb08185b1c9958591e4818dc99585d195960621b6044820152606490fd5b8380fd5b50346100db57806003193601126100db576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346100db5760203660031901126100db576103b86104bb6104b6610a2f565b610c8d565b60405191829182610a95565b50346100db57806104d736610a5b565b90916104e1610d72565b610515337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b61051f8183610d9d565b6001600160a01b039060409061053490610c8d565b01511691823b156105a3576040516340c10f1960e01b81526001600160a01b0392909216600483015260248201529082908290604490829084905af1801561059857610583575b506001905580f35b8161058d91610b2c565b6100db57805f61057b565b6040513d84823e3d90fd5b505050fd5b50346100db5760403660031901126100db576105c2610a2f565b6004602435916105d0610d72565b610604337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b61060d81610c8d565b9260408401602060018060a01b0382511660405195868092633c05076160e21b82525afa801561079f5761064e610654916004968991610770575b50610c00565b83610c25565b81516040516318160ddd60e01b81529560209187919082906001600160a01b03165afa94851561076557879561072b575b5061069a6003956001600160401b0392610c38565b936106aa60808801958651610c56565b85526106bb60608801948551610c56565b8452168652600160205260408620946001600160401b038151168654916020600160401b600160e01b0391015160401b169163ffffffff60e01b1617178555600185019060018060a01b039051166001600160601b0360a01b825416179055516002840155519101556001815580f35b94506020853d60201161075d575b8161074660209383610b2c565b810103126107595793519361069a610685565b5f80fd5b3d9150610739565b6040513d89823e3d90fd5b610792915060203d602011610798575b61078a8183610b2c565b810190610be7565b5f610648565b503d610780565b6040513d88823e3d90fd5b5034610759576107b936610a5b565b90916107c3610d72565b6107f7337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b602460206001600160a01b038161080d85610c8d565b015116604051928380926370a0823160e01b82523060048301525afa80156109aa5784915f916109fa575b50106109b5576108488183610d9d565b6001600160a01b03604061085b83610c8d565b015116803b1561075957604051632770a7eb60e21b81526001600160a01b038416600482015260248101859052905f908290604490829084905af180156109aa5761098b575b506108f59260209290916001600160a01b039084906108bf90610c8d565b015116908560405180968195829463a9059cbb60e01b84526004840160209093929193604081019460018060a01b031681520152565b03925af190811561059857829161094c575b5015610914576001815580f35b60405162461bcd60e51b815260206004820152601060248201526f13dc195c985d1a5bdb8819985a5b195960821b6044820152606490fd5b90506020813d602011610983575b8161096760209383610b2c565b8101031261097f5751801515810361097f575f610907565b5080fd5b3d915061095a565b6108f5939194509161099f5f602094610b2c565b5f94919350916108a1565b6040513d5f823e3d90fd5b60405162461bcd60e51b815260206004820152601860248201527f4e6f7420656e6f75676820746f6b656e20696e20706f6f6c00000000000000006044820152606490fd5b9150506020813d602011610a27575b81610a1660209383610b2c565b81010312610759578390515f610838565b3d9150610a09565b600435906001600160401b038216820361075957565b600435906001600160a01b038216820361075957565b6060906003190112610759576004356001600160401b03811681036107595790602435906044356001600160a01b03811681036107595790565b91909160808060a08301946001600160401b03815116845260018060a01b03602082015116602085015260018060a01b036040820151166040850152606081015160608501520151910152565b602081019081106001600160401b03821117610afd57604052565b634e487b7160e01b5f52604160045260245ffd5b60a081019081106001600160401b03821117610afd57604052565b90601f801991011681019081106001600160401b03821117610afd57604052565b81601f82011215610759578035906001600160401b038211610afd5760405192610b81601f8401601f191660200185610b2c565b8284526020838301011161075957815f926020809301838601378301015290565b15610ba957565b60405162461bcd60e51b815260206004820152601660248201527521b0b63632b91036bab9ba103132902937baba32b91760511b6044820152606490fd5b90816020910312610759575160ff811681036107595790565b60ff16604d8111610c1157600a0a90565b634e487b7160e01b5f52601160045260245ffd5b81810292918115918404141715610c1157565b8115610c42570490565b634e487b7160e01b5f52601260045260245ffd5b91908201809211610c1157565b60405190610c7082610b11565b5f6080838281528260208201528260408201528260608201520152565b6001600160401b0390610c9e610c63565b50165f818152600160205260409081902054901c6001600160a01b031615610d1a575f52600160205260405f20600360405191610cda83610b11565b80546001600160401b03811684526001600160a01b03604091821c8116602086015260018301541690840152600281015460608401520154608082015290565b60405162461bcd60e51b815260206004820152600c60248201526b125b9d985b1a59081c1bdbdb60a21b6044820152606490fd5b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b60025f5414610d815760025f55565b633ee5aeb560e01b5f5260045ffd5b91908203918211610c1157565b610da682610c8d565b60018060a01b03821690815f52600260205260405f205460808201908151809110610dd4575b505050505050565b610deb90845f52600260205260405f205490610d90565b9060408301956024602060018060a01b038951166040519283809263f552dbd760e01b82528a60048301525afa9081156109aa575f91610f69575b50610e3390600494610c25565b8751604051633c05076160e21b81529460209186919082906001600160a01b03165afa9081156109aa57610e73610e79926003965f916107705750610c00565b90610c38565b948251905f52600260205260405f20556001600160401b036060850191610ea1878451610d90565b8352165f52600160205260405f20936001600160401b038151168554916020600160401b600160e01b0391015160401b169163ffffffff60e01b1617178455600184019660018060a01b0390511696876001600160601b0360a01b82541617905551600284015551910155823b15610759576040516340c10f1960e01b81526001600160a01b039290921660048301526024820152905f908290604490829084905af180156109aa57610f59575b8080808080610dcc565b5f610f6391610b2c565b5f610f4f565b90506020813d602011610f94575b81610f8460209383610b2c565b8101031261075957516004610e26565b3d9150610f7756fea2646970667358221220104054c7c69e17d2f531259f3e9eac44d356b3339c80e92ac8cc0607c882a2f364736f6c634300081c0033",
  "deployedBytecode": "0x60806040526004361015610011575f80fd5b5f5f3560e01c8062505499146107aa578063142d3fbd146105a85780637717fbc6146104c75780638ce7442614610451578063919adab814610496578063d16352af14610451578063d6db5b64146101cd578063e77772fe14610188578063ee6a0bef146100de5763ffc9896b14610087575f80fd5b346100db5760203660031901126100db5760406020916100a5610a45565b8183516100b181610ae2565b526001600160a01b031681526002835220604051906100cf82610ae2565b54809152604051908152f35b80fd5b50346100db5760403660031901126100db576100f8610a45565b6024356001600160401b038116810361018457610113610d72565b6001600160a01b03604061012683610c8d565b015116330361013f5761013891610d9d565b6001815580f35b60405162461bcd60e51b815260206004820152601960248201527f43616c6c6572206d75737420626520706f6f6c20746f6b656e000000000000006044820152606490fd5b8280fd5b50346100db57806003193601126100db576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346100db5760803660031901126100db576101e7610a2f565b6024356001600160a01b03811690819003610184576044356001600160401b03811161044d5761021b903690600401610b4d565b6064356001600160401b0381116103fa5761023a903690600401610b4d565b906001600160401b0361024b610c63565b94610280337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b168086526001602052604080872054919291901c6001600160a01b0316610411576102d36020916102e56040519586938493631ee6928560e21b8552876004860152606060248601526064850190610d4e565b83810360031901604485015290610d4e565b0381887f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165af19182156104065785926103bc575b506103b894816040928652602086019485528286019360018060a01b031684528152600160205220916001600160401b03845116835491600160401b600160e01b03905160401b169163ffffffff60e01b1617178255600182019060018060a01b039051166001600160601b0360a01b825416179055606082015160028201556003608083015191015560405191829182610a95565b0390f35b9091506020813d6020116103fe575b816103d860209383610b2c565b810103126103fa57516001600160a01b03811681036103fa57906103b8610322565b8480fd5b3d91506103cb565b6040513d87823e3d90fd5b60405162461bcd60e51b8152602060048201526014602482015273141bdbdb08185b1c9958591e4818dc99585d195960621b6044820152606490fd5b8380fd5b50346100db57806003193601126100db576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346100db5760203660031901126100db576103b86104bb6104b6610a2f565b610c8d565b60405191829182610a95565b50346100db57806104d736610a5b565b90916104e1610d72565b610515337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b61051f8183610d9d565b6001600160a01b039060409061053490610c8d565b01511691823b156105a3576040516340c10f1960e01b81526001600160a01b0392909216600483015260248201529082908290604490829084905af1801561059857610583575b506001905580f35b8161058d91610b2c565b6100db57805f61057b565b6040513d84823e3d90fd5b505050fd5b50346100db5760403660031901126100db576105c2610a2f565b6004602435916105d0610d72565b610604337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b61060d81610c8d565b9260408401602060018060a01b0382511660405195868092633c05076160e21b82525afa801561079f5761064e610654916004968991610770575b50610c00565b83610c25565b81516040516318160ddd60e01b81529560209187919082906001600160a01b03165afa94851561076557879561072b575b5061069a6003956001600160401b0392610c38565b936106aa60808801958651610c56565b85526106bb60608801948551610c56565b8452168652600160205260408620946001600160401b038151168654916020600160401b600160e01b0391015160401b169163ffffffff60e01b1617178555600185019060018060a01b039051166001600160601b0360a01b825416179055516002840155519101556001815580f35b94506020853d60201161075d575b8161074660209383610b2c565b810103126107595793519361069a610685565b5f80fd5b3d9150610739565b6040513d89823e3d90fd5b610792915060203d602011610798575b61078a8183610b2c565b810190610be7565b5f610648565b503d610780565b6040513d88823e3d90fd5b5034610759576107b936610a5b565b90916107c3610d72565b6107f7337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610ba2565b602460206001600160a01b038161080d85610c8d565b015116604051928380926370a0823160e01b82523060048301525afa80156109aa5784915f916109fa575b50106109b5576108488183610d9d565b6001600160a01b03604061085b83610c8d565b015116803b1561075957604051632770a7eb60e21b81526001600160a01b038416600482015260248101859052905f908290604490829084905af180156109aa5761098b575b506108f59260209290916001600160a01b039084906108bf90610c8d565b015116908560405180968195829463a9059cbb60e01b84526004840160209093929193604081019460018060a01b031681520152565b03925af190811561059857829161094c575b5015610914576001815580f35b60405162461bcd60e51b815260206004820152601060248201526f13dc195c985d1a5bdb8819985a5b195960821b6044820152606490fd5b90506020813d602011610983575b8161096760209383610b2c565b8101031261097f5751801515810361097f575f610907565b5080fd5b3d915061095a565b6108f5939194509161099f5f602094610b2c565b5f94919350916108a1565b6040513d5f823e3d90fd5b60405162461bcd60e51b815260206004820152601860248201527f4e6f7420656e6f75676820746f6b656e20696e20706f6f6c00000000000000006044820152606490fd5b9150506020813d602011610a27575b81610a1660209383610b2c565b81010312610759578390515f610838565b3d9150610a09565b600435906001600160401b038216820361075957565b600435906001600160a01b038216820361075957565b6060906003190112610759576004356001600160401b03811681036107595790602435906044356001600160a01b03811681036107595790565b91909160808060a08301946001600160401b03815116845260018060a01b03602082015116602085015260018060a01b036040820151166040850152606081015160608501520151910152565b602081019081106001600160401b03821117610afd57604052565b634e487b7160e01b5f52604160045260245ffd5b60a081019081106001600160401b03821117610afd57604052565b90601f801991011681019081106001600160401b03821117610afd57604052565b81601f82011215610759578035906001600160401b038211610afd5760405192610b81601f8401601f191660200185610b2c565b8284526020838301011161075957815f926020809301838601378301015290565b15610ba957565b60405162461bcd60e51b815260206004820152601660248201527521b0b63632b91036bab9ba103132902937baba32b91760511b6044820152606490fd5b90816020910312610759575160ff811681036107595790565b60ff16604d8111610c1157600a0a90565b634e487b7160e01b5f52601160045260245ffd5b81810292918115918404141715610c1157565b8115610c42570490565b634e487b7160e01b5f52601260045260245ffd5b91908201809211610c1157565b60405190610c7082610b11565b5f6080838281528260208201528260408201528260608201520152565b6001600160401b0390610c9e610c63565b50165f818152600160205260409081902054901c6001600160a01b031615610d1a575f52600160205260405f20600360405191610cda83610b11565b80546001600160401b03811684526001600160a01b03604091821c8116602086015260018301541690840152600281015460608401520154608082015290565b60405162461bcd60e51b815260206004820152600c60248201526b125b9d985b1a59081c1bdbdb60a21b6044820152606490fd5b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b60025f5414610d815760025f55565b633ee5aeb560e01b5f5260045ffd5b91908203918211610c1157565b610da682610c8d565b60018060a01b03821690815f52600260205260405f205460808201908151809110610dd4575b505050505050565b610deb90845f52600260205260405f205490610d90565b9060408301956024602060018060a01b038951166040519283809263f552dbd760e01b82528a60048301525afa9081156109aa575f91610f69575b50610e3390600494610c25565b8751604051633c05076160e21b81529460209186919082906001600160a01b03165afa9081156109aa57610e73610e79926003965f916107705750610c00565b90610c38565b948251905f52600260205260405f20556001600160401b036060850191610ea1878451610d90565b8352165f52600160205260405f20936001600160401b038151168554916020600160401b600160e01b0391015160401b169163ffffffff60e01b1617178455600184019660018060a01b0390511696876001600160601b0360a01b82541617905551600284015551910155823b15610759576040516340c10f1960e01b81526001600160a01b039290921660048301526024820152905f908290604490829084905af180156109aa57610f59575b8080808080610dcc565b5f610f6391610b2c565b5f610f4f565b90506020813d602011610f94575b81610f8460209383610b2c565b8101031261075957516004610e26565b3d9150610f7756fea2646970667358221220104054c7c69e17d2f531259f3e9eac44d356b3339c80e92ac8cc0607c882a2f364736f6c634300081c0033",
  "linkReferences": {},
  "deployedLinkReferences": {},
  "immutableReferences": {
    "514": [
      {
        "length": 32,
        "start": 594
      },
      {
        "length": 32,
        "start": 1127
      },
      {
        "length": 32,
        "start": 1255
      },
      {
        "length": 32,
        "start": 1494
      },
      {
        "length": 32,
        "start": 1993
      }
    ],
    "526": [
      {
        "length": 32,
        "start": 414
      },
      {
        "length": 32,
        "start": 746
      }
    ]
  },
  "inputSourceName": "contracts/protocol/BondPool.sol",
  "buildInfoId": "3730540ab1d98da067d3c7183bb5a357aa7b5834"
}